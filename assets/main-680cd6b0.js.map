{"version":3,"file":"main-680cd6b0.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\n// ======== LOG UTILES ========\nconst log  = (...a: any[]) => console.log(\"[WA]\", ...a);\nconst warn = (...a: any[]) => console.warn(\"[WA]\", ...a);\nconst err  = (...a: any[]) => console.error(\"[WA]\", ...a);\n\nlog(\"Script file loaded\");\n\n// ======== ETAT POPUPS ========\nlet tpPopup: any | undefined = undefined;\nlet clockPopup: any | undefined = undefined;\n\n// ======== CONFIG ========\nconst mapURL = \"/@/ynov-1733302243/ynov_adventure/new-map\";\nconst zones: { id: string; label: string }[] = [\n  { id: \"#TPA-IA\",     label: \"IA\" },\n  { id: \"#TPAINFO\",    label: \"Informatique\" },\n  { id: \"#TPACYBER\",   label: \"CybersÃ©curitÃ©\" },\n  { id: \"#TPAARCHI\",   label: \"Architecture\" },\n  { id: \"#TPABIM\",     label: \"BÃ¢timent NumÃ©rique\" },\n  { id: \"#TPAAUDIO\",   label: \"Audiovisuel\" },\n  { id: \"#TPADIGITAL\", label: \"DIGITAL IA\" },\n  { id: \"#TPA3D\",      label: \"3D\" },\n  { id: \"#TPAHUB\",     label: \"Accueil\" },\n];\n\n// ======== INIT ========\nWA.onInit().then(() => {\n  log(\"onInit OK\");\n\n  // (Optionnel) petite dÃ©mo horloge si tu as une zone nommÃ©e \"clock\"\n  try {\n    WA.room.area.onEnter(\"clock\").subscribe(() => {\n      const d = new Date();\n      const pad = (n: number) => String(n).padStart(2, \"0\");\n      const time = `${pad(d.getHours())}:${pad(d.getMinutes())}`;\n      clockPopup = WA.ui.openPopup(\"clockPopup\", \"It's \" + time, []);\n    });\n    WA.room.area.onLeave(\"clock\").subscribe(() => {\n      try { clockPopup?.close?.(); } catch {}\n      clockPopup = undefined;\n    });\n  } catch (e) {\n    // pas grave si la zone n'existe pas\n    warn(\"clock init warn:\", e);\n  }\n\n  // Bouton Candidater â€” ONGLET UNIQUEMENT\n  try {\n    WA.ui.actionBar.addButton({\n      id: \"candidater-btn\",\n      label: \"ðŸŸ¡ Candidater\",\n      callback: () => {\n        try {\n          // mÃ©thode WA si dispo\n          // @ts-ignore - selon version\n          if (WA?.nav?.openTab) WA.nav.openTab(\"https://www.ynov.com/candidature\");\n          else window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n        } catch {\n          window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n        }\n      },\n    });\n    log(\"Candidater button added\");\n  } catch (e) {\n    err(\"add candidater button error:\", e);\n  }\n\n  // Bouton TÃ©lÃ©portation â€” POPUP VERTICALE\n  try {\n    WA.ui.actionBar.addButton({\n      id: \"teleport-btn\",\n      label: \"ðŸ§­ TÃ©lÃ©portation\",\n      callback: () => openTeleportPopup(),\n    });\n    log(\"Teleportation button added\");\n  } catch (e) {\n    err(\"add teleport button error:\", e);\n  }\n}).catch((e) => err(\"onInit error:\", e));\n\n// ======== POPUP TÃ‰LÃ‰PORTATION (VERTICALE) ========\nfunction openTeleportPopup(): void {\n  try {\n    // ferme lâ€™ancienne si elle existe (pour Ã©viter conflits)\n    try { tpPopup?.close?.(); } catch {}\n    tpPopup = undefined;\n\n    // construit les boutons (un par zone), plus \"Fermer\"\n    const buttons = zones.map((z) => ({\n      label: z.label,\n      callback: () => {\n        log(\"Teleporting to\", mapURL + z.id);\n        WA.nav.goToRoom(mapURL + z.id);\n        try { tpPopup?.close?.(); } catch {}\n        tpPopup = undefined;\n      },\n    }));\n\n    buttons.push({\n      label: \"Fermer\",\n      callback: () => {\n        try { tpPopup?.close?.(); } catch {}\n        tpPopup = undefined;\n      },\n    });\n\n    // ouvre la popup (UI native WA = liste VERTICALE)\n    tpPopup = WA.ui.openPopup(\n      \"teleportPopup\",\n      \"TÃ©lÃ©portation\\n\\nChoisissez une destination :\",\n      buttons\n    );\n    log(\"Teleport popup opened\");\n  } catch (e) {\n    err(\"openTeleportPopup error:\", e);\n\n    // Secours de diagnostic : tente une mini-popup de test\n    try {\n      WA.ui.openPopup(\"dbgPopup\", \"Impossible dâ€™ouvrir la popup.\\nCliquez OK pour vÃ©rifier lâ€™UI.\", [\n        { label: \"OK\", callback: () => { try { /* ferme auto */ } catch {} } },\n      ]);\n    } catch (e2) {\n      err(\"fallback debug popup error:\", e2);\n    }\n  }\n}\nexport {};\n"],"names":["log","a","warn","err","tpPopup","clockPopup","mapURL","zones","d","pad","n","time","_a","openTeleportPopup","buttons","z","e","e2"],"mappings":"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"}