const i={log:(...e)=>console.log("[WA]",...e),err:(...e)=>console.error("[WA]",...e)},b="/@/ynov-1733302243/ynov_adventure/new-map",T=[{id:"#TPA-IA",label:"IA"},{id:"#TPAINFO",label:"Informatique"},{id:"#TPACYBER",label:"Cybersécurité"},{id:"#TPAARCHI",label:"Architecture"},{id:"#TPABIM",label:"Bâtiment Numérique"},{id:"#TPAAUDIO",label:"Audiovisuel"},{id:"#TPADIGITAL",label:"DIGITAL IA"},{id:"#TPA3D",label:"3D"},{id:"#TPAHUB",label:"Accueil"}];function m(e=25,t=200){return new Promise((r,o)=>{let n=0;const a=()=>{var A;const u=(A=WA.ui)==null?void 0:A.actionBar;if(u!=null&&u.addButton)return r();if(n++,n>=e)return o(new Error("actionBar indisponible"));setTimeout(a,t)};a()})}function g(e){var o,n;const t=(o=WA.ui)==null?void 0:o.actionBar;if(!(t!=null&&t.addButton)){i.err("actionBar.addButton introuvable");return}try{(n=t.removeButton)==null||n.call(t,e.id)}catch{}const r={id:e.id,label:e.label,callback:e.onClick,clickCallback:e.onClick};try{e.bgColor!==void 0&&(r.bgColor=e.bgColor),e.isGradient!==void 0&&(r.isGradient=e.isGradient),t.addButton(r)}catch{try{t.addButton({id:e.id,label:e.label,callback:e.onClick,clickCallback:e.onClick})}catch(a){i.err(`Échec ajout bouton ${e.id}:`,a)}}}const C="teleport-btn";let l=!1,d=[],c=[];WA.onInit().then(()=>(I(),m())).then(()=>{g({id:C,label:"Téléportation",bgColor:"#2ea7ff",isGradient:!0,onClick:()=>B()})}).catch(e=>i.err("Init error:",e));function I(){c.length&&(c.forEach(e=>{try{e()}catch{}}),c=[]);try{const e=WA.ui.registerMenuCommand("Téléportation",()=>B());typeof e=="function"&&c.push(e)}catch(e){i.err("registerMenuCommand Teleportation error:",e)}T.forEach(e=>{try{const t=WA.ui.registerMenuCommand(e.label,()=>{try{WA.nav.goToRoom(b+e.id)}catch(r){i.err("goToRoom error:",r)}});typeof t=="function"&&c.push(t)}catch(t){i.err(`registerMenuCommand ${e.label} error:`,t)}})}function B(){l?f():k()}function k(){l||(l=!0,y())}function f(){h(),l=!1}function y(){h(),T.forEach((e,t)=>{s(`tp-z-${t}`,e.label,()=>{try{WA.nav.goToRoom(b+e.id)}catch(r){i.err("goToRoom error:",r)}f()})}),s("tp-close","✖",()=>f())}function s(e,t,r){var n;d.push(e);const o=(n=WA.ui)==null?void 0:n.actionBar;try{o.addButton({id:e,label:t,callback:r,clickCallback:r})}catch(a){i.err(`Erreur lors de l'ajout du bouton ${e}:`,a)}}function h(){var t;const e=(t=WA.ui)==null?void 0:t.actionBar;d.forEach(r=>{var o;try{(o=e.removeButton)==null||o.call(e,r)}catch{}}),d=[]}
//# sourceMappingURL=main-8b6d766f.js.map
