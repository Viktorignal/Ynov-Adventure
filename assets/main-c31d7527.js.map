{"version":3,"file":"main-c31d7527.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\n/* ================== CONFIG ================== */\nconst mapURL = \"/@/ynov-1733302243/ynov_adventure/new-map\";\nconst ZONES: { id: string; label: string }[] = [\n  { id: \"#TPA-IA\",     label: \"IA\" },\n  { id: \"#TPAINFO\",    label: \"Informatique\" },\n  { id: \"#TPACYBER\",   label: \"Cybers√©curit√©\" },\n  { id: \"#TPAARCHI\",   label: \"Architecture\" },\n  { id: \"#TPABIM\",     label: \"B√¢timent Num√©rique\" },\n  { id: \"#TPAAUDIO\",   label: \"Audiovisuel\" },\n  { id: \"#TPADIGITAL\", label: \"DIGITAL IA\" },\n  { id: \"#TPA3D\",      label: \"3D\" },\n  { id: \"#TPAHUB\",     label: \"Accueil\" },\n];\n/* ============================================= */\n\n/* ===== Helpers ‚Äúcompat‚Äù pour l‚Äôaction bar ===== */\nfunction addActionButtonCompat(opts: {\n  id: string;\n  label: string;\n  onClick: () => void;\n  bgColor?: string;\n  isGradient?: boolean;\n  hoverColor?: string;\n}) {\n  const cfg: any = {\n    id: opts.id,\n    label: opts.label,\n    callback: opts.onClick,\n    clickCallback: opts.onClick, // selon version\n  };\n  // Si ton instance supporte la couleur/gradient, elle les prendra. Sinon, ignor√© sans casser.\n  if (opts.bgColor) cfg.bgColor = opts.bgColor;\n  if (opts.isGradient !== undefined) cfg.isGradient = opts.isGradient;\n  if (opts.hoverColor) cfg.hoverColor = opts.hoverColor;\n\n  (WA.ui as any).actionBar.addButton(cfg);\n}\n\nfunction removeActionButton(id: string) {\n  const ab: any = WA.ui.actionBar;\n  try { ab.removeButton?.(id); } catch { /* ignore */ }\n}\n\n/* =============== T√©l√©portation (action bar pagin√©e) =============== */\nconst MAIN_TP_BTN_ID = \"teleport-btn\";\n\nlet tpOpen = false;\nlet tpPage = 0;\nlet tpButtonIds: string[] = [];\n\n// D√©tection mobile : pointer tactile OU petite largeur\nconst IS_MOBILE =\n  /Mobi|Android/i.test(navigator.userAgent) ||\n  (window.matchMedia && window.matchMedia(\"(pointer:coarse)\").matches) ||\n  (typeof window !== \"undefined\" && window.innerWidth < 768);\n\n// Desktop = 3 par page, Mobile = 1 par page pour garantir l‚Äôaffichage\nconst PER_PAGE = IS_MOBILE ? 1 : 3;\n\nWA.onInit().then(() => {\n  // üü° Candidater ‚Äî onglet uniquement (jamais d‚Äôiframe)\n  addActionButtonCompat({\n    id: \"candidater-btn\",\n    label: \"Candidater\",\n    bgColor: \"#edb911\",\n    isGradient: true,\n    onClick: () => {\n      try {\n        // @ts-ignore selon version\n        if (WA?.nav?.openTab) WA.nav.openTab(\"https://www.ynov.com/candidature\");\n        else window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      } catch {\n        window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      }\n    },\n  });\n\n  // üß≠ T√©l√©portation ‚Äî bouton principal (sera retir√© quand le menu s‚Äôouvre)\n  addActionButtonCompat({\n    id: MAIN_TP_BTN_ID,\n    label: \"T√©l√©portation\",\n    bgColor: \"#2ea7ff\",\n    isGradient: true,\n    onClick: () => openTeleportMenu(),\n  });\n}).catch((e) => console.error(\"[WA] onInit error:\", e));\n\nfunction openTeleportMenu() {\n  if (tpOpen) return;\n\n  // on enl√®ve le bouton principal pour lib√©rer la place (tu le voulais ‚Äúsoit l‚Äôun soit l‚Äôautre‚Äù)\n  removeActionButton(MAIN_TP_BTN_ID);\n\n  tpOpen = true;\n  tpPage = 0;\n  drawTpButtons();\n}\n\nfunction closeTeleportMenu() {\n  // supprime les sous-boutons actuels\n  removeTpButtons();\n  tpOpen = false;\n\n  // r√©-ajoute le bouton principal T√©l√©portation\n  addActionButtonCompat({\n    id: MAIN_TP_BTN_ID,\n    label: \"T√©l√©portation\",\n    bgColor: \"#2ea7ff\",\n    isGradient: true,\n    onClick: () => openTeleportMenu(),\n  });\n}\n\nfunction drawTpButtons() {\n  removeTpButtons();\n\n  const totalPages = Math.max(1, Math.ceil(ZONES.length / PER_PAGE));\n  tpPage = Math.max(0, Math.min(tpPage, totalPages - 1));\n\n  const start = tpPage * PER_PAGE;\n  const slice = ZONES.slice(start, start + PER_PAGE);\n\n  // 1) ‚óÄ (si pas premi√®re page)\n  if (tpPage > 0) {\n    addTpButton(\"tp-prev\", \"‚óÄ\", () => {\n      tpPage -= 1;\n      drawTpButtons();\n    });\n  }\n\n  // 2) zones de la page\n  slice.forEach((z, i) => {\n    addTpButton(`tp-z-${start + i}`, z.label, () => {\n      WA.nav.goToRoom(mapURL + z.id);\n      // refermer apr√®s TP (si tu veux garder ouvert, commente ces deux lignes)\n      closeTeleportMenu();\n    });\n  });\n\n  // 3) ‚ñ∂ (si pas derni√®re page)\n  if (tpPage < totalPages - 1) {\n    addTpButton(\"tp-next\", \"‚ñ∂\", () => {\n      tpPage += 1;\n      drawTpButtons();\n    });\n  }\n\n  // 4) ‚úñ Fermer\n  addTpButton(\"tp-close\", \"‚úñ\", () => closeTeleportMenu());\n}\n\nfunction addTpButton(id: string, label: string, cb: () => void) {\n  tpButtonIds.push(id);\n  // sous-boutons : pas de style ‚Äúexotique‚Äù pour maximiser la compat\n  (WA.ui as any).actionBar.addButton({\n    id,\n    label,\n    callback: cb,\n    clickCallback: cb,\n  });\n}\n\nfunction removeTpButtons() {\n  const ab: any = WA.ui.actionBar;\n  tpButtonIds.forEach((id) => {\n    try { ab.removeButton?.(id); } catch {}\n  });\n  tpButtonIds = [];\n}\n\nexport {};\n"],"names":["mapURL","ZONES","addActionButtonCompat","opts","cfg","removeActionButton","id","_a","ab","MAIN_TP_BTN_ID","tpOpen","tpPage","tpButtonIds","IS_MOBILE","PER_PAGE","openTeleportMenu","e","drawTpButtons","closeTeleportMenu","removeTpButtons","totalPages","start","slice","addTpButton","z","i","label","cb"],"mappings":"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"}