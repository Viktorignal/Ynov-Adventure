{"version":3,"file":"main-b73c6c28.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\n// Logs utiles\nconst log  = (...a: any[]) => console.log(\"[WA]\", ...a);\nconst err  = (...a: any[]) => console.error(\"[WA]\", ...a);\n\n/* ================== CONFIG ================== */\nconst mapURL = \"/@/ynov-1733302243/ynov_adventure/new-map\";\nconst zones: { id: string; label: string }[] = [\n  { id: \"#TPA-IA\",     label: \"IA\" },\n  { id: \"#TPAINFO\",    label: \"Informatique\" },\n  { id: \"#TPACYBER\",   label: \"CybersÃ©curitÃ©\" },\n  { id: \"#TPAARCHI\",   label: \"Architecture\" },\n  { id: \"#TPABIM\",     label: \"BÃ¢timent NumÃ©rique\" },\n  { id: \"#TPAAUDIO\",   label: \"Audiovisuel\" },\n  { id: \"#TPADIGITAL\", label: \"DIGITAL IA\" },\n  { id: \"#TPA3D\",      label: \"3D\" },\n  { id: \"#TPAHUB\",     label: \"Accueil\" },\n];\n/* ============================================= */\n\nlet tempTpButtonIds: string[] = []; // pour le fallback action bar\n\nWA.onInit().then(() => {\n  log(\"onInit OK\");\n\n  // ðŸŸ¡ Candidater (onglet uniquement, jamais d'iframe)\n  WA.ui.actionBar.addButton({\n    id: \"candidater-btn\",\n    label: \"ðŸŸ¡ Candidater\",\n    callback: () => {\n      try {\n        // @ts-ignore selon la version\n        if (WA?.nav?.openTab) WA.nav.openTab(\"https://www.ynov.com/candidature\");\n        else window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      } catch {\n        window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      }\n    },\n  });\n\n  // ðŸ§­ TÃ©lÃ©portation\n  WA.ui.actionBar.addButton({\n    id: \"teleport-btn\",\n    label: \"ðŸ§­ TÃ©lÃ©portation\",\n    callback: () => openTeleportUI(),\n  });\n\n  log(\"Buttons added\");\n}).catch((e) => err(\"onInit error:\", e));\n\n/* =============== TÃ©lÃ©portation UI =============== */\nfunction openTeleportUI() {\n  // 1) Essayer le MODAL natif (ne nÃ©cessite aucun objet de map)\n  const modalApi: any = (WA.ui as any)?.modal;\n  if (modalApi?.openModal) {\n    const buttons = zones.map((z) => ({\n      label: z.label,\n      callback: () => {\n        WA.nav.goToRoom(mapURL + z.id);\n        try { modalApi.closeModal?.(); } catch {}\n      },\n    }));\n    buttons.push({ label: \"Fermer\", callback: () => { try { modalApi.closeModal?.(); } catch {} } });\n\n    modalApi.openModal({\n      title: \"TÃ©lÃ©portation\",\n      content: \"Choisissez une destination :\",\n      buttons,\n    });\n    log(\"Teleport modal opened\");\n    return;\n  }\n\n  // 2) Fallback : sous-menu temporaire dans la barre dâ€™action\n  openTeleportActionBarFallback();\n}\n\n/* -------- Fallback : sous-menu action bar -------- */\nfunction openTeleportActionBarFallback() {\n  removeTeleportActionBarButtons();\n\n  zones.forEach((z, idx) => {\n    const id = `tp-${idx}`;\n    tempTpButtonIds.push(id);\n    WA.ui.actionBar.addButton({\n      id,\n      label: z.label,\n      callback: () => {\n        WA.nav.goToRoom(mapURL + z.id);\n        removeTeleportActionBarButtons();\n      },\n    });\n  });\n\n  const closeId = \"tp-close\";\n  tempTpButtonIds.push(closeId);\n  WA.ui.actionBar.addButton({\n    id: closeId,\n    label: \"Fermer TP\",\n    callback: () => removeTeleportActionBarButtons(),\n  });\n\n  log(\"Teleport action-bar fallback opened\");\n}\n\nfunction removeTeleportActionBarButtons() {\n  const ab: any = WA.ui.actionBar;\n  tempTpButtonIds.forEach((id) => {\n    try { ab.removeButton?.(id); } catch {}\n  });\n  tempTpButtonIds = [];\n}\n/* ================================================= */\n\nexport {};\n"],"names":["log","a","err","mapURL","zones","tempTpButtonIds","_a","openTeleportUI","e","modalApi","buttons","z","openTeleportActionBarFallback","removeTeleportActionBarButtons","idx","id","closeId","ab"],"mappings":"AAGA,MAAMA,EAAO,IAAIC,IAAa,QAAQ,IAAI,OAAQ,GAAGA,CAAC,EAChDC,EAAO,IAAID,IAAa,QAAQ,MAAM,OAAQ,GAAGA,CAAC,EAGlDE,EAAS,4CACTC,EAAyC,CAC7C,CAAE,GAAI,UAAe,MAAO,IAAK,EACjC,CAAE,GAAI,WAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,YAAe,MAAO,eAAgB,EAC5C,CAAE,GAAI,YAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,UAAe,MAAO,oBAAqB,EACjD,CAAE,GAAI,YAAe,MAAO,aAAc,EAC1C,CAAE,GAAI,cAAe,MAAO,YAAa,EACzC,CAAE,GAAI,SAAe,MAAO,IAAK,EACjC,CAAE,GAAI,UAAe,MAAO,SAAU,CACxC,EAGA,IAAIC,EAA4B,CAAA,EAEhC,GAAG,OAAA,EAAS,KAAK,IAAM,CACrBL,EAAI,WAAW,EAGZ,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,iBACJ,MAAO,gBACP,SAAU,IAAM,CA3BpB,IAAAM,EA4BU,GAAA,EAEEA,EAAA,mBAAI,MAAJ,MAAAA,EAAS,QAAY,GAAA,IAAI,QAAQ,kCAAkC,EAC3D,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CAAA,MAC9E,CACC,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CACjF,CACF,CAAA,CACD,EAGE,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,eACJ,MAAO,mBACP,SAAU,IAAMC,EAAe,CAAA,CAChC,EAEDP,EAAI,eAAe,CACrB,CAAC,EAAE,MAAOQ,GAAMN,EAAI,gBAAiBM,CAAC,CAAC,EAGvC,SAASD,GAAiB,CAjD1B,IAAAD,EAmDQ,MAAAG,GAAiBH,EAAA,GAAG,KAAH,YAAAA,EAAe,MACtC,GAAIG,GAAA,MAAAA,EAAU,UAAW,CACvB,MAAMC,EAAUN,EAAM,IAAKO,IAAO,CAChC,MAAOA,EAAE,MACT,SAAU,IAAM,CAvDtB,IAAAL,EAwDQ,GAAG,IAAI,SAASH,EAASQ,EAAE,EAAE,EACzB,GAAA,EAAEL,EAAAG,EAAS,aAAT,MAAAH,EAAA,KAAAG,EAAsB,MAAW,CAAC,CAC1C,CACA,EAAA,EACFC,EAAQ,KAAK,CAAE,MAAO,SAAU,SAAU,IAAM,CA5DpD,IAAAJ,EA4D0D,GAAA,EAAEA,EAAAG,EAAS,aAAT,MAAAH,EAAA,KAAAG,EAAsB,MAAW,CAAC,GAAK,EAE/FA,EAAS,UAAU,CACjB,MAAO,gBACP,QAAS,+BACT,QAAAC,CAAA,CACD,EACDV,EAAI,uBAAuB,EAC3B,MACF,CAG8BY,GAChC,CAGA,SAASA,GAAgC,CACRC,IAEzBT,EAAA,QAAQ,CAACO,EAAGG,IAAQ,CAClB,MAAAC,EAAK,MAAMD,CAAG,GACpBT,EAAgB,KAAKU,CAAE,EACpB,GAAA,GAAG,UAAU,UAAU,CACxB,GAAAA,EACA,MAAOJ,EAAE,MACT,SAAU,IAAM,CACd,GAAG,IAAI,SAASR,EAASQ,EAAE,EAAE,EACEE,GACjC,CAAA,CACD,CAAA,CACF,EAED,MAAMG,EAAU,WAChBX,EAAgB,KAAKW,CAAO,EACzB,GAAA,GAAG,UAAU,UAAU,CACxB,GAAIA,EACJ,MAAO,YACP,SAAU,IAAMH,EAA+B,CAAA,CAChD,EAEDb,EAAI,qCAAqC,CAC3C,CAEA,SAASa,GAAiC,CAClC,MAAAI,EAAU,GAAG,GAAG,UACNZ,EAAA,QAASU,GAAO,CAzGlC,IAAAT,EA0GQ,GAAA,EAAEA,EAAAW,EAAG,eAAH,MAAAX,EAAA,KAAAW,EAAkBF,EAAE,MAAW,CAAC,CAAA,CACvC,EACDV,EAAkB,CAAA,CACpB"}