const i={log:(...t)=>console.log("[WA]",...t),err:(...t)=>console.error("[WA]",...t)},f="/@/ynov-1733302243/ynov_adventure/new-map",T=[{id:"#TPA-IA",label:"IA"},{id:"#TPAINFO",label:"Informatique"},{id:"#TPACYBER",label:"Cybersécurité"},{id:"#TPAARCHI",label:"Architecture"},{id:"#TPABIM",label:"Bâtiment Numérique"},{id:"#TPAAUDIO",label:"Audiovisuel"},{id:"#TPADIGITAL",label:"DIGITAL IA"},{id:"#TPA3D",label:"3D"},{id:"#TPAHUB",label:"Accueil"}];function s(t=25,o=200){return new Promise((e,n)=>{let r=0;const l=()=>{var A;const a=(A=WA.ui)==null?void 0:A.actionBar;if(a!=null&&a.addButton)return e();if(r++,r>=t)return n(new Error("actionBar indisponible"));setTimeout(l,o)};l()})}function I(t){var n,r;const o=(n=WA.ui)==null?void 0:n.actionBar;if(!(o!=null&&o.addButton)){i.err("actionBar.addButton introuvable");return}try{(r=o.removeButton)==null||r.call(o,t.id)}catch{}const e={id:t.id,label:t.label,callback:t.onClick,clickCallback:t.onClick};try{t.bgColor!==void 0&&(e.bgColor=t.bgColor),t.isGradient!==void 0&&(e.isGradient=t.isGradient),o.addButton(e),i.log(`Bouton ajouté: ${t.id}`)}catch{try{o.addButton({id:t.id,label:t.label,callback:t.onClick,clickCallback:t.onClick}),i.log(`Bouton ajouté (fallback): ${t.id}`)}catch(a){i.err(`Échec ajout bouton ${t.id}:`,a)}}}const k="teleport-btn";let c=!1,u=[];WA.onInit().then(()=>s()).then(()=>{I({id:k,label:"Téléportation",bgColor:"#2ea7ff",isGradient:!0,onClick:()=>C()}),i.log("Action bar prête, bouton Téléportation ajouté.")}).catch(t=>i.err("Init UI/actionBar error:",t));function C(){c?d():h()}function h(){c||(c=!0,g())}function d(){B(),c=!1}function g(){B(),T.forEach((t,o)=>{b(`tp-z-${o}`,t.label,()=>{try{WA.nav.goToRoom(f+t.id)}catch(e){i.err("goToRoom error:",e)}d()})}),b("tp-close","✖",()=>d())}function b(t,o,e){var r;u.push(t);const n=(r=WA.ui)==null?void 0:r.actionBar;try{n.addButton({id:t,label:o,callback:e,clickCallback:e})}catch(l){i.err(`Erreur lors de l'ajout du bouton ${t}:`,l)}}function B(){var o;const t=(o=WA.ui)==null?void 0:o.actionBar;u.forEach(e=>{var n;try{(n=t.removeButton)==null||n.call(t,e)}catch{}}),u=[]}
//# sourceMappingURL=main-d74ecd31.js.map
