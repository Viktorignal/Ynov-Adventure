{"version":3,"file":"main-e6d5febd.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nconsole.log(\"[WA] Script file loaded\");\n\nlet clockPopup: any | undefined = undefined;\nlet tpPopup: any | undefined = undefined;\n\n/* === CONFIG === */\nconst mapURL = \"/@/ynov-1733302243/ynov_adventure/new-map\";\nconst zones = [\n  { id: \"#TPA-IA\",     label: \"IA\" },\n  { id: \"#TPAINFO\",    label: \"Informatique\" },\n  { id: \"#TPACYBER\",   label: \"Cybers√©curit√©\" },\n  { id: \"#TPAARCHI\",   label: \"Architecture\" },\n  { id: \"#TPABIM\",     label: \"B√¢timent Num√©rique\" },\n  { id: \"#TPAAUDIO\",   label: \"Audiovisuel\" },\n  { id: \"#TPADIGITAL\", label: \"DIGITAL IA\" },\n  { id: \"#TPA3D\",      label: \"3D\" },\n  { id: \"#TPAHUB\",     label: \"Accueil\" },\n];\n/* ============== */\n\nWA.onInit()\n  .then(() => {\n    console.log(\"[WA] onInit OK\");\n\n    /* === Exemple existant : popup heure sur la zone 'clock' === */\n    try {\n      WA.room.area.onEnter(\"clock\").subscribe(() => {\n        const d = new Date();\n        const pad = (n: number) => String(n).padStart(2, \"0\");\n        const time = `${pad(d.getHours())}:${pad(d.getMinutes())}`;\n        clockPopup = WA.ui.openPopup(\"clockPopup\", \"It's \" + time, []);\n      });\n      WA.room.area.onLeave(\"clock\").subscribe(() => {\n        try { clockPopup?.close?.(); } catch {}\n        clockPopup = undefined;\n      });\n    } catch (e) {\n      console.warn(\"[WA] clock init warn:\", e);\n    }\n\n    /* === Bouton CANDIDATER ‚Äî onglet uniquement (pas d'iframe) === */\n    WA.ui.actionBar.addButton({\n      id: \"candidater-btn\",\n      label: \"üü° Candidater\",\n      callback: () => {\n        try {\n          if ((WA as any)?.nav?.openTab) {\n            (WA as any).nav.openTab(\"https://www.ynov.com/candidature\");\n          } else {\n            window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n          }\n        } catch {\n          window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n        }\n      },\n    });\n\n    /* === Bouton T√âL√âPORTATION ‚Äî ouvre une liste VERTICALE (popup native) === */\n    WA.ui.actionBar.addButton({\n      id: \"teleport-btn\",\n      label: \"üß≠ T√©l√©portation\",\n      callback: () => openTeleportPopup(),\n    });\n\n    console.log(\"[WA] Buttons added\");\n  })\n  .catch((e) => console.error(\"[WA] onInit error:\", e));\n\n/* === T√©l√©portation: popup verticale native (aucune iframe) === */\nfunction openTeleportPopup() {\n  // Si d√©j√† ouverte, on la ferme pour rafra√Æchir proprement\n  try { tpPopup?.close?.(); } catch {}\n  tpPopup = undefined;\n\n  const buttons = zones.map((z) => ({\n    label: z.label,\n    callback: () => {\n      WA.nav.goToRoom(mapURL + z.id);\n      try { tpPopup?.close?.(); } catch {}\n      tpPopup = undefined;\n    },\n  }));\n\n  // Bouton \"Fermer\"\n  buttons.push({\n    label: \"Fermer\",\n    callback: () => {\n      try { tpPopup?.close?.(); } catch {}\n      tpPopup = undefined;\n    },\n  });\n\n  // La popup WA empile les boutons verticalement\n  tpPopup = WA.ui.openPopup(\n    \"teleportPopup\",\n    \"T√©l√©portation\\n\\nChoisissez une destination :\",\n    buttons\n  );\n}\n\nexport {};\n"],"names":["clockPopup","tpPopup","mapURL","zones","d","pad","n","time","_a","e","openTeleportPopup","buttons","z"],"mappings":"AAEA,QAAQ,IAAI,yBAAyB,EAErC,IAAIA,EACAC,EAGJ,MAAMC,EAAS,4CACTC,EAAQ,CACZ,CAAE,GAAI,UAAe,MAAO,IAAK,EACjC,CAAE,GAAI,WAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,YAAe,MAAO,eAAgB,EAC5C,CAAE,GAAI,YAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,UAAe,MAAO,oBAAqB,EACjD,CAAE,GAAI,YAAe,MAAO,aAAc,EAC1C,CAAE,GAAI,cAAe,MAAO,YAAa,EACzC,CAAE,GAAI,SAAe,MAAO,IAAK,EACjC,CAAE,GAAI,UAAe,MAAO,SAAU,CACxC,EAGA,GAAG,OAAA,EACA,KAAK,IAAM,CACV,QAAQ,IAAI,gBAAgB,EAGxB,GAAA,CACF,GAAG,KAAK,KAAK,QAAQ,OAAO,EAAE,UAAU,IAAM,CACtC,MAAAC,MAAQ,KACRC,EAAOC,GAAc,OAAOA,CAAC,EAAE,SAAS,EAAG,GAAG,EAC9CC,EAAO,GAAGF,EAAID,EAAE,SAAU,CAAA,CAAC,IAAIC,EAAID,EAAE,WAAY,CAAA,CAAC,GACxDJ,EAAa,GAAG,GAAG,UAAU,aAAc,QAAUO,EAAM,CAAA,CAAE,CAAA,CAC9D,EACD,GAAG,KAAK,KAAK,QAAQ,OAAO,EAAE,UAAU,IAAM,CAhCpD,IAAAC,EAiCY,GAAA,EAAEA,EAAAR,GAAA,YAAAA,EAAY,QAAZ,MAAAQ,EAAA,KAAAR,EAAoB,MAAW,CAAC,CACzBA,EAAA,MAAA,CACd,QACMS,EAAG,CACF,QAAA,KAAK,wBAAyBA,CAAC,CACzC,CAGG,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,iBACJ,MAAO,gBACP,SAAU,IAAM,CA5CtB,IAAAD,EA6CY,GAAA,EACGA,EAAA,mBAAY,MAAZ,MAAAA,EAAiB,QACnB,GAAW,IAAI,QAAQ,kCAAkC,EAEnD,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CACjF,MACM,CACC,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CACjF,CACF,CAAA,CACD,EAGE,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,eACJ,MAAO,mBACP,SAAU,IAAME,EAAkB,CAAA,CACnC,EAED,QAAQ,IAAI,oBAAoB,CAClC,CAAC,EACA,MAAOD,GAAM,QAAQ,MAAM,qBAAsBA,CAAC,CAAC,EAGtD,SAASC,GAAoB,CArE7B,IAAAF,EAuEM,GAAA,EAAEA,EAAAP,GAAA,YAAAA,EAAS,QAAT,MAAAO,EAAA,KAAAP,EAAiB,MAAW,CAAC,CACzBA,EAAA,OAEV,MAAMU,EAAUR,EAAM,IAAKS,IAAO,CAChC,MAAOA,EAAE,MACT,SAAU,IAAM,CA5EpB,IAAAJ,EA6EM,GAAG,IAAI,SAASN,EAASU,EAAE,EAAE,EACzB,GAAA,EAAEJ,EAAAP,GAAA,YAAAA,EAAS,QAAT,MAAAO,EAAA,KAAAP,EAAiB,MAAW,CAAC,CACzBA,EAAA,MACZ,CACA,EAAA,EAGFU,EAAQ,KAAK,CACX,MAAO,SACP,SAAU,IAAM,CAtFpB,IAAAH,EAuFU,GAAA,EAAEA,EAAAP,GAAA,YAAAA,EAAS,QAAT,MAAAO,EAAA,KAAAP,EAAiB,MAAW,CAAC,CACzBA,EAAA,MACZ,CAAA,CACD,EAGDA,EAAU,GAAG,GAAG,UACd,gBACA;AAAA;AAAA,8BACAU,CAAA,CAEJ"}