{"version":3,"file":"main-ee54e3dd.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\n// Logs utiles\nconst log  = (...a: any[]) => console.log(\"[WA]\", ...a);\nconst err  = (...a: any[]) => console.error(\"[WA]\", ...a);\n\n/* ================== CONFIG ================== */\nconst mapURL = \"/@/ynov-1733302243/ynov_adventure/new-map\";\nconst zones: { id: string; label: string }[] = [\n  { id: \"#TPA-IA\",     label: \"IA\" },\n  { id: \"#TPAINFO\",    label: \"Informatique\" },\n  { id: \"#TPACYBER\",   label: \"Cybers√©curit√©\" },\n  { id: \"#TPAARCHI\",   label: \"Architecture\" },\n  { id: \"#TPABIM\",     label: \"B√¢timent Num√©rique\" },\n  { id: \"#TPAAUDIO\",   label: \"Audiovisuel\" },\n  { id: \"#TPADIGITAL\", label: \"DIGITAL IA\" },\n  { id: \"#TPA3D\",      label: \"3D\" },\n  { id: \"#TPAHUB\",     label: \"Accueil\" },\n];\n/* ============================================= */\n\n// √âtat du sous-menu de TP\nlet tpOpen = false;\nlet tpPage = 0;\nconst PER_PAGE = 3; // 3 zones par page pour tenir m√™me avec un zoom √©lev√©\nlet tpButtonIds: string[] = [];\n\nWA.onInit().then(() => {\n  log(\"onInit OK\");\n\n  // üü° Candidater (onglet uniquement)\n  WA.ui.actionBar.addButton({\n    id: \"candidater-btn\",\n    label: \"üü° Candidater\",\n    callback: () => {\n      try {\n        // @ts-ignore (selon version)\n        if (WA?.nav?.openTab) WA.nav.openTab(\"https://www.ynov.com/candidature\");\n        else window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      } catch {\n        window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      }\n    },\n  });\n\n  // üß≠ T√©l√©portation (toggle le sous-menu)\n  WA.ui.actionBar.addButton({\n    id: \"teleport-btn\",\n    label: \"üß≠ T√©l√©portation\",\n    callback: () => toggleTeleportMenu(),\n  });\n\n  log(\"Buttons added\");\n}).catch((e) => err(\"onInit error:\", e));\n\n/* =============== Sous-menu T√©l√©portation (action bar, pagin√©) =============== */\nfunction toggleTeleportMenu() {\n  if (tpOpen) {\n    removeTpButtons();\n    tpOpen = false;\n    return;\n  }\n  tpPage = 0;\n  drawTpButtons();\n  tpOpen = true;\n}\n\n// Construit les boutons pour la page courante\nfunction drawTpButtons() {\n  removeTpButtons(); // nettoie avant d'afficher\n\n  const totalPages = Math.max(1, Math.ceil(zones.length / PER_PAGE));\n  tpPage = Math.max(0, Math.min(tpPage, totalPages - 1));\n\n  const start = tpPage * PER_PAGE;\n  const slice = zones.slice(start, start + PER_PAGE);\n\n  // 1) Bouton \"‚óÄ\" si page > 0\n  if (tpPage > 0) {\n    addTpButton(\"tp-prev\", \"‚óÄ\", () => {\n      tpPage -= 1;\n      drawTpButtons();\n    });\n  }\n\n  // 2) Les zones de la page\n  slice.forEach((z, i) => {\n    const id = `tp-z-${start + i}`;\n    addTpButton(id, z.label, () => {\n      WA.nav.goToRoom(mapURL + z.id);\n      // apr√®s TP, on peut garder le menu ouvert OU non ; ici on le referme\n      removeTpButtons();\n      tpOpen = false;\n    });\n  });\n\n  // 3) Bouton \"‚ñ∂\" si page < last\n  if (tpPage < totalPages - 1) {\n    addTpButton(\"tp-next\", \"‚ñ∂\", () => {\n      tpPage += 1;\n      drawTpButtons();\n    });\n  }\n\n  // 4) Bouton \"Fermer\"\n  addTpButton(\"tp-close\", \"Fermer\", () => {\n    removeTpButtons();\n    tpOpen = false;\n  });\n\n  log(`TP menu page ${tpPage + 1}/${totalPages}`);\n}\n\n// Ajoute un bouton et le m√©morise pour suppression ult√©rieure\nfunction addTpButton(id: string, label: string, cb: () => void) {\n  tpButtonIds.push(id);\n  WA.ui.actionBar.addButton({\n    id,\n    label,\n    callback: cb,\n  });\n}\n\n// Supprime tous les boutons du sous-menu\nfunction removeTpButtons() {\n  const ab: any = WA.ui.actionBar;\n  tpButtonIds.forEach((id) => {\n    try { ab.removeButton?.(id); } catch { /* ignore */ }\n  });\n  tpButtonIds = [];\n}\n\nexport {};\n"],"names":["log","a","err","mapURL","zones","tpOpen","tpPage","PER_PAGE","tpButtonIds","_a","toggleTeleportMenu","e","removeTpButtons","drawTpButtons","totalPages","start","slice","addTpButton","z","i","id","label","cb","ab"],"mappings":"AAGA,MAAMA,EAAO,IAAIC,IAAa,QAAQ,IAAI,OAAQ,GAAGA,CAAC,EAChDC,EAAO,IAAID,IAAa,QAAQ,MAAM,OAAQ,GAAGA,CAAC,EAGlDE,EAAS,4CACTC,EAAyC,CAC7C,CAAE,GAAI,UAAe,MAAO,IAAK,EACjC,CAAE,GAAI,WAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,YAAe,MAAO,eAAgB,EAC5C,CAAE,GAAI,YAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,UAAe,MAAO,oBAAqB,EACjD,CAAE,GAAI,YAAe,MAAO,aAAc,EAC1C,CAAE,GAAI,cAAe,MAAO,YAAa,EACzC,CAAE,GAAI,SAAe,MAAO,IAAK,EACjC,CAAE,GAAI,UAAe,MAAO,SAAU,CACxC,EAIA,IAAIC,EAAS,GACTC,EAAS,EACb,MAAMC,EAAW,EACjB,IAAIC,EAAwB,CAAA,EAE5B,GAAG,OAAA,EAAS,KAAK,IAAM,CACrBR,EAAI,WAAW,EAGZ,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,iBACJ,MAAO,gBACP,SAAU,IAAM,CA/BpB,IAAAS,EAgCU,GAAA,EAEEA,EAAA,mBAAI,MAAJ,MAAAA,EAAS,QAAY,GAAA,IAAI,QAAQ,kCAAkC,EAC3D,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CAAA,MAC9E,CACC,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CACjF,CACF,CAAA,CACD,EAGE,GAAA,GAAG,UAAU,UAAU,CACxB,GAAI,eACJ,MAAO,mBACP,SAAU,IAAMC,EAAmB,CAAA,CACpC,EAEDV,EAAI,eAAe,CACrB,CAAC,EAAE,MAAOW,GAAMT,EAAI,gBAAiBS,CAAC,CAAC,EAGvC,SAASD,GAAqB,CAC5B,GAAIL,EAAQ,CACMO,IACPP,EAAA,GACT,MACF,CACSC,EAAA,EACKO,IACLR,EAAA,EACX,CAGA,SAASQ,GAAgB,CACPD,IAEV,MAAAE,EAAa,KAAK,IAAI,EAAG,KAAK,KAAKV,EAAM,OAASG,CAAQ,CAAC,EACxDD,EAAA,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAQQ,EAAa,CAAC,CAAC,EAErD,MAAMC,EAAQT,EAASC,EACjBS,EAAQZ,EAAM,MAAMW,EAAOA,EAAQR,CAAQ,EAG7CD,EAAS,GACCW,EAAA,UAAW,IAAK,IAAM,CACtBX,GAAA,EACIO,GAAA,CACf,EAIGG,EAAA,QAAQ,CAACE,EAAGC,IAAM,CAChB,MAAAC,EAAK,QAAQL,EAAQI,CAAC,GAChBF,EAAAG,EAAIF,EAAE,MAAO,IAAM,CAC7B,GAAG,IAAI,SAASf,EAASe,EAAE,EAAE,EAEbN,IACPP,EAAA,EAAA,CACV,CAAA,CACF,EAGGC,EAASQ,EAAa,GACZG,EAAA,UAAW,IAAK,IAAM,CACtBX,GAAA,EACIO,GAAA,CACf,EAISI,EAAA,WAAY,SAAU,IAAM,CACtBL,IACPP,EAAA,EAAA,CACV,EAEDL,EAAI,gBAAgBM,EAAS,CAAC,IAAIQ,CAAU,EAAE,CAChD,CAGA,SAASG,EAAYG,EAAYC,EAAeC,EAAgB,CAC9Dd,EAAY,KAAKY,CAAE,EAChB,GAAA,GAAG,UAAU,UAAU,CACxB,GAAAA,EACA,MAAAC,EACA,SAAUC,CAAA,CACX,CACH,CAGA,SAASV,GAAkB,CACnB,MAAAW,EAAU,GAAG,GAAG,UACVf,EAAA,QAASY,GAAO,CA3H9B,IAAAX,EA4HQ,GAAA,EAAEA,EAAAc,EAAG,eAAH,MAAAd,EAAA,KAAAc,EAAkBH,EAAE,MAAW,CAAe,CAAA,CACrD,EACDZ,EAAc,CAAA,CAChB"}