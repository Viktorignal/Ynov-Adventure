const a={log:(...t)=>console.log("[WA]",...t),err:(...t)=>console.error("[WA]",...t)},C="/@/ynov-1733302243/ynov_adventure/new-map",f=[{id:"#TPA-IA",label:"IA"},{id:"#TPAINFO",label:"Informatique"},{id:"#TPACYBER",label:"Cybersécurité"},{id:"#TPAARCHI",label:"Architecture"},{id:"#TPABIM",label:"Bâtiment Numérique"},{id:"#TPAAUDIO",label:"Audiovisuel"},{id:"#TPADIGITAL",label:"DIGITAL IA"},{id:"#TPA3D",label:"3D"},{id:"#TPAHUB",label:"Accueil"}],s=3;function P(t=25,e=200){return new Promise((o,n)=>{let r=0;const c=()=>{var B;const d=(B=WA.ui)==null?void 0:B.actionBar;if(d!=null&&d.addButton)return o();if(r++,r>=t)return n(new Error("actionBar indisponible"));setTimeout(c,e)};c()})}function p(t){var n,r;const e=(n=WA.ui)==null?void 0:n.actionBar;if(!(e!=null&&e.addButton)){a.err("actionBar.addButton introuvable");return}try{(r=e.removeButton)==null||r.call(e,t.id)}catch{}const o={id:t.id,label:t.label,callback:t.onClick,clickCallback:t.onClick};try{t.bgColor!==void 0&&(o.bgColor=t.bgColor),t.isGradient!==void 0&&(o.isGradient=t.isGradient),e.addButton(o)}catch{try{e.addButton({id:t.id,label:t.label,callback:t.onClick,clickCallback:t.onClick})}catch{}}}function k(t){var o,n;const e=(o=WA.ui)==null?void 0:o.actionBar;try{(n=e==null?void 0:e.removeButton)==null||n.call(e,t)}catch{}}const b="teleport-btn";let A=!1,i=0,m=[],l=[];WA.onInit().then(()=>(y(),P())).then(()=>{p({id:b,label:"Téléportation",bgColor:"#2ea7ff",isGradient:!0,onClick:()=>h()})}).catch(t=>a.err("Init error:",t));function y(){l.length&&(l.forEach(t=>{try{t()}catch{}}),l=[]);try{const t=WA.ui.registerMenuCommand("Téléportation",()=>h());typeof t=="function"&&l.push(t)}catch(t){a.err("registerMenuCommand Téléportation error:",t)}f.forEach(t=>{try{const e=WA.ui.registerMenuCommand(t.label,()=>{try{WA.nav.goToRoom(C+t.id)}catch(o){a.err("goToRoom error:",o)}});typeof e=="function"&&l.push(e)}catch(e){a.err(`registerMenuCommand ${t.label} error:`,e)}})}function h(){A||(A=!0,k(b),i=0,T())}function g(){I(),A=!1,p({id:b,label:"Téléportation",bgColor:"#2ea7ff",isGradient:!0,onClick:()=>h()})}function T(){I();const t=Math.max(1,Math.ceil(f.length/s));i=Math.max(0,Math.min(i,t-1));const e=i*s,o=f.slice(e,e+s);i>0&&u("tp-prev","◀",()=>{i-=1,T()}),o.forEach((n,r)=>{u(`tp-z-${e+r}`,n.label,()=>{try{WA.nav.goToRoom(C+n.id)}catch(c){a.err("goToRoom error:",c)}g()})}),i<t-1&&u("tp-next","▶",()=>{i+=1,T()}),u("tp-close","✖",()=>g()),a.log(`TP menu page ${i+1}/${t}`)}function u(t,e,o){var r;m.push(t);const n=(r=WA.ui)==null?void 0:r.actionBar;try{n.addButton({id:t,label:e,callback:o,clickCallback:o})}catch(c){a.err(`Ajout bouton ${t} impossible:`,c)}}function I(){var e;const t=(e=WA.ui)==null?void 0:e.actionBar;m.forEach(o=>{var n;try{(n=t.removeButton)==null||n.call(t,o)}catch{}}),m=[]}
//# sourceMappingURL=main-1c757f73.js.map
