{"version":3,"file":"main-9a514173.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\n/* ================== CONFIG ================== */\nconst MAP_URL = \"/@/ynov-1733302243/ynov_adventure/new-map\";\nconst ZONES: { id: string; label: string }[] = [\n  { id: \"#TPA-IA\",     label: \"IA\" },\n  { id: \"#TPAINFO\",    label: \"Informatique\" },\n  { id: \"#TPACYBER\",   label: \"Cybers√©curit√©\" },\n  { id: \"#TPAARCHI\",   label: \"Architecture\" },\n  { id: \"#TPABIM\",     label: \"B√¢timent Num√©rique\" },\n  { id: \"#TPAAUDIO\",   label: \"Audiovisuel\" },\n  { id: \"#TPADIGITAL\", label: \"DIGITAL IA\" },\n  { id: \"#TPA3D\",      label: \"3D\" },\n  { id: \"#TPAHUB\",     label: \"Accueil\" },\n];\n/* ============================================= */\n\n/* ===== Helpers ‚Äúcompat‚Äù pour l‚Äôaction bar ===== */\nfunction addActionButtonCompat(opts: {\n  id: string;\n  label: string;\n  onClick: () => void;\n  bgColor?: string;\n  isGradient?: boolean;\n  hoverColor?: string;\n}) {\n  const cfg: any = {\n    id: opts.id,\n    label: opts.label,\n    callback: opts.onClick,\n    clickCallback: opts.onClick, // selon version\n  };\n  // Couleurs si support√©es par l‚Äôinstance (sinon ignor√©es sans casser)\n  if (opts.bgColor) cfg.bgColor = opts.bgColor;\n  if (opts.isGradient !== undefined) cfg.isGradient = opts.isGradient;\n  if (opts.hoverColor) cfg.hoverColor = opts.hoverColor;\n  (WA.ui as any).actionBar.addButton(cfg);\n}\nfunction removeActionButton(id: string) {\n  const ab: any = WA.ui.actionBar;\n  try { ab.removeButton?.(id); } catch {}\n}\n\n/* =============== T√©l√©portation (action bar pagin√©e) =============== */\nconst MAIN_TP_BTN_ID = \"teleport-btn\";\n\nlet tpOpen = false;\nlet tpPage = 0;\nlet tpButtonIds: string[] = [];\n\n// D√©tection mobile : on r√©duit √† 1 zone/page\nconst IS_MOBILE =\n  /Mobi|Android/i.test(navigator.userAgent) ||\n  (window.matchMedia && window.matchMedia(\"(pointer:coarse)\").matches) ||\n  (typeof window !== \"undefined\" && window.innerWidth < 768);\nconst PER_PAGE = IS_MOBILE ? 1 : 3;\n\nWA.onInit().then(() => {\n  // üü° Candidater ‚Äî couleur/gradient si support√©s (sinon style normal)\n  addActionButtonCompat({\n    id: \"candidater-btn\",\n    label: \"Candidater\",\n    bgColor: \"#edb911\",\n    isGradient: true,\n    onClick: () => {\n      try {\n        // @ts-ignore (selon version)\n        if (WA?.nav?.openTab) WA.nav.openTab(\"https://www.ynov.com/candidature\");\n        else window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      } catch {\n        window.open(\"https://www.ynov.com/candidature\", \"_blank\", \"noopener,noreferrer\");\n      }\n    },\n  });\n\n  // üß≠ T√©l√©portation ‚Äî bouton principal\n  addActionButtonCompat({\n    id: MAIN_TP_BTN_ID,\n    label: \"T√©l√©portation\",\n    bgColor: \"#2ea7ff\",\n    isGradient: true,\n    onClick: () => openTeleportMenu(),\n  });\n}).catch((e) => console.error(\"[WA] onInit error:\", e));\n\nfunction openTeleportMenu() {\n  if (tpOpen) return;\n  tpOpen = true;\n  // ‚Äúsoit l‚Äôun soit l‚Äôautre‚Äù : on enl√®ve le bouton principal\n  removeActionButton(MAIN_TP_BTN_ID);\n\n  tpPage = 0;\n  drawTpButtons();\n}\n\nfunction closeTeleportMenu() {\n  removeTpButtons();\n  tpOpen = false;\n\n  // On r√©-ajoute le bouton principal t√©l√©portation\n  addActionButtonCompat({\n    id: MAIN_TP_BTN_ID,\n    label: \"T√©l√©portation\",\n    bgColor: \"#2ea7ff\",\n    isGradient: true,\n    onClick: () => openTeleportMenu(),\n  });\n}\n\nfunction drawTpButtons() {\n  removeTpButtons();\n\n  const totalPages = Math.max(1, Math.ceil(ZONES.length / PER_PAGE));\n  tpPage = Math.max(0, Math.min(tpPage, totalPages - 1));\n\n  const start = tpPage * PER_PAGE;\n  const slice = ZONES.slice(start, start + PER_PAGE);\n\n  // 1) ‚óÄ Pr√©c√©dent\n  if (tpPage > 0) {\n    addTpBtn(\"tp-prev\", \"‚óÄ Pr√©c√©dent\", () => {\n      tpPage -= 1;\n      drawTpButtons();\n    });\n  }\n\n  // 2) Zones de la page\n  slice.forEach((z, i) => {\n    addTpBtn(`tp-z-${start + i}`, z.label, () => {\n      WA.nav.goToRoom(MAP_URL + z.id);\n      // refermer apr√®s TP (si tu veux garder ouvert, remplace par drawTpButtons())\n      closeTeleportMenu();\n    });\n  });\n\n  // 3) Suivant ‚ñ∂\n  if (tpPage < totalPages - 1) {\n    addTpBtn(\"tp-next\", \"Suivant ‚ñ∂\", () => {\n      tpPage += 1;\n      drawTpButtons();\n    });\n  }\n\n  // 4) ‚úñ Fermer\n  addTpBtn(\"tp-close\", \"‚úñ Fermer\", () => closeTeleportMenu());\n}\n\nfunction addTpBtn(id: string, label: string, cb: () => void) {\n  tpButtonIds.push(id);\n  // sous-boutons : pas de style ‚Äúexotique‚Äù pour rester ultra-compatible\n  (WA.ui as any).actionBar.addButton({\n    id,\n    label,\n    callback: cb,\n    clickCallback: cb,\n  });\n}\n\nfunction removeTpButtons() {\n  const ab: any = WA.ui.actionBar;\n  tpButtonIds.forEach((id) => { try { ab.removeButton?.(id); } catch {} });\n  tpButtonIds = [];\n}\n\nexport {};\n"],"names":["MAP_URL","ZONES","addActionButtonCompat","opts","cfg","removeActionButton","id","_a","ab","MAIN_TP_BTN_ID","tpOpen","tpPage","tpButtonIds","IS_MOBILE","PER_PAGE","openTeleportMenu","drawTpButtons","closeTeleportMenu","removeTpButtons","totalPages","start","slice","addTpBtn","z","i","label","cb"],"mappings":"AAGA,MAAMA,EAAU,4CACVC,EAAyC,CAC7C,CAAE,GAAI,UAAe,MAAO,IAAK,EACjC,CAAE,GAAI,WAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,YAAe,MAAO,eAAgB,EAC5C,CAAE,GAAI,YAAe,MAAO,cAAe,EAC3C,CAAE,GAAI,UAAe,MAAO,oBAAqB,EACjD,CAAE,GAAI,YAAe,MAAO,aAAc,EAC1C,CAAE,GAAI,cAAe,MAAO,YAAa,EACzC,CAAE,GAAI,SAAe,MAAO,IAAK,EACjC,CAAE,GAAI,UAAe,MAAO,SAAU,CACxC,EAIA,SAASC,EAAsBC,EAO5B,CACD,MAAMC,EAAW,CACf,GAAID,EAAK,GACT,MAAOA,EAAK,MACZ,SAAUA,EAAK,QACf,cAAeA,EAAK,OAAA,EAGlBA,EAAK,UAASC,EAAI,QAAUD,EAAK,SACjCA,EAAK,aAAe,SAAWC,EAAI,WAAaD,EAAK,YACrDA,EAAK,aAAYC,EAAI,WAAaD,EAAK,YAC1C,GAAG,GAAW,UAAU,UAAUC,CAAG,CACxC,CACA,SAASC,EAAmBC,EAAY,CAnCxC,IAAAC,EAoCQ,MAAAC,EAAU,GAAG,GAAG,UAClB,GAAA,EAAED,EAAAC,EAAG,eAAH,MAAAD,EAAA,KAAAC,EAAkBF,EAAE,MAAW,CAAC,CACxC,CAGA,MAAMG,EAAiB,eAEvB,IAAIC,EAAS,GACTC,EAAS,EACTC,EAAwB,CAAA,EAG5B,MAAMC,EACJ,gBAAgB,KAAK,UAAU,SAAS,GACvC,OAAO,YAAc,OAAO,WAAW,kBAAkB,EAAE,SAC3D,OAAO,OAAW,KAAe,OAAO,WAAa,IAClDC,EAAWD,EAAY,EAAI,EAEjC,GAAG,OAAA,EAAS,KAAK,IAAM,CAECX,EAAA,CACpB,GAAI,iBACJ,MAAO,aACP,QAAS,UACT,WAAY,GACZ,QAAS,IAAM,CA7DnB,IAAAK,EA8DU,GAAA,EAEEA,EAAA,mBAAI,MAAJ,MAAAA,EAAS,QAAY,GAAA,IAAI,QAAQ,kCAAkC,EAC3D,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CAAA,MAC9E,CACC,OAAA,KAAK,mCAAoC,SAAU,qBAAqB,CACjF,CACF,CAAA,CACD,EAGqBL,EAAA,CACpB,GAAIO,EACJ,MAAO,gBACP,QAAS,UACT,WAAY,GACZ,QAAS,IAAMM,EAAiB,CAAA,CACjC,CACH,CAAC,EAAE,MAAO,GAAM,QAAQ,MAAM,qBAAsB,CAAC,CAAC,EAEtD,SAASA,GAAmB,CACtBL,IACKA,EAAA,GAETL,EAAmBI,CAAc,EAExBE,EAAA,EACKK,IAChB,CAEA,SAASC,GAAoB,CACXC,IACPR,EAAA,GAGaR,EAAA,CACpB,GAAIO,EACJ,MAAO,gBACP,QAAS,UACT,WAAY,GACZ,QAAS,IAAMM,EAAiB,CAAA,CACjC,CACH,CAEA,SAASC,GAAgB,CACPE,IAEV,MAAAC,EAAa,KAAK,IAAI,EAAG,KAAK,KAAKlB,EAAM,OAASa,CAAQ,CAAC,EACxDH,EAAA,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAQQ,EAAa,CAAC,CAAC,EAErD,MAAMC,EAAQT,EAASG,EACjBO,EAAQpB,EAAM,MAAMmB,EAAOA,EAAQN,CAAQ,EAG7CH,EAAS,GACFW,EAAA,UAAW,cAAe,IAAM,CAC7BX,GAAA,EACIK,GAAA,CACf,EAIGK,EAAA,QAAQ,CAACE,EAAGC,IAAM,CACtBF,EAAS,QAAQF,EAAQI,CAAC,GAAID,EAAE,MAAO,IAAM,CAC3C,GAAG,IAAI,SAASvB,EAAUuB,EAAE,EAAE,EAEZN,GAAA,CACnB,CAAA,CACF,EAGGN,EAASQ,EAAa,GACfG,EAAA,UAAW,YAAa,IAAM,CAC3BX,GAAA,EACIK,GAAA,CACf,EAIHM,EAAS,WAAY,WAAY,IAAML,EAAmB,CAAA,CAC5D,CAEA,SAASK,EAAShB,EAAYmB,EAAeC,EAAgB,CAC3Dd,EAAY,KAAKN,CAAE,EAElB,GAAG,GAAW,UAAU,UAAU,CACjC,GAAAA,EACA,MAAAmB,EACA,SAAUC,EACV,cAAeA,CAAA,CAChB,CACH,CAEA,SAASR,GAAkB,CACnB,MAAAV,EAAU,GAAG,GAAG,UACVI,EAAA,QAASN,GAAO,CA7J9B,IAAAC,EA6JoC,GAAA,EAAEA,EAAAC,EAAG,eAAH,MAAAD,EAAA,KAAAC,EAAkBF,EAAE,MAAW,CAAC,CAAA,CAAG,EACvEM,EAAc,CAAA,CAChB"}